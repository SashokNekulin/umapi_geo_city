# umapi_geo_city
======
Nodejs модуль umapi_geo_city это инструмент для работы с объектами карты. Первичный вариант использования - это создание набора связанных с картой объектов (т.е. каждый из них имеет свою широту, долготу и данные), за которым следуют запросы для поиска объектов в заданной области ( прямоугольная область / круглая область).
Модуль обернут реализаций красно-черных двоичных деревьев поиска с использованием алгоритма z-кривой для преобразования координат 2D-плоскости в скалярный индекс (и использования этого индекса в качестве числового ключа в основе красно-черного дерева).

Таким образом, операция поиска не должна проходить через весь список, но мы исключаем множество элементов, для которых мы заранее знаем, что нам не нужно их рассматривать на основе предоставленных критериев поиска.

Поэтому при использовании сотен, тысяч или даже большего количества объектов в вашем картографическом приложении и при возникновении проблем с производительностью эта библиотека может оказаться очень полезной.

Не требует базы данных. В составе модуля уже имеется подготовленный список городов России.

## Установка
```
npm install umapi_geo_city
```

## Использование

Подключение:
```js
var GEO = require('umapi_geo_city')

// Чтобы создать новый пустой набор (дерево), выполните:
var set = new GEO()

// Загрузить в текущий набор города России
set.loadCityList()
// Поиск ближайших объектов в радиусе 30 км. от заданных координат
console.log('CIRCLE', set.getListCircle(54.7073218, 20.5072458, 30))
// Получить список объектов в прямоугольнике, определяемом двумя координатами
// (аргументы рассматриваются как две диагональные вершины прямоугольника)
console.log('POLIGON', set.getListPoligon(54.7073218, 20.5072458, 54.000, 20.000))
// Получить расстояние между двумя точками в Км.
console.log('DISTANCE', set.distance(54.7073218, 20.5072458, 54.000, 20.000))

```

## Загрузить в текущий набор города России:

```js
set.loadCityList()
```

## Получить текущий набор объектов:

```js
console.log(set.getGeoList())
```

## Очистить текущий набор объектов:

```js
set.clearGeoList()
```





## Автор

[Alexandr Nikulin](https://github.com/SashokNekulin/), e-mail: [nekulin@mail.ru](mailto:nekulin@mail.ru)
